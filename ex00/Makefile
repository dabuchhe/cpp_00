#------------------------------------------------#
#					FILES						 #
#------------------------------------------------#
NAME		= Megaphone
SRC_FILES	= megaphone

#------------------------------------------------#
#					DIRECTORY					 #
#------------------------------------------------#
OBJ_DIR		= .build/

#------------------------------------------------#
#					PATHS						 #
#------------------------------------------------#
SRC			= $(addsuffix .cpp, $(SRC_FILES))
OBJ			= $(addprefix $(OBJ_DIR), $(addsuffix .o, $(SRC_FILES)))

#------------------------------------------------#
#					COMMANDS					 #
#------------------------------------------------#
CC			= c++ -std=c++98
RM			= rm -rf

#------------------------------------------------#
#					FLAGS						 #
#------------------------------------------------#
CFLAGS		= -Wall -Wextra -Werror
MAKEFLAGS	+= --no-print-directory
#------------------------------------------------#
#					RULES						 #
#------------------------------------------------#

all: $(NAME)

$(NAME): $(OBJ) | $(OBJ_DIR)
	@echo "\n$(MAGENTA)$(BOLD)ðŸ’» Compiling executable...$(RESET)"
	@$(CC) $(CFLAGS) $(OBJ) -o $(NAME) 
	@echo "$(GREEN)$(BOLD)\nâœ… Compilation successful!$(RESET)"
	@echo "$(CYAN)    â””â”€ Ready to run: ./$(NAME)\n$(RESET)"

$(OBJ_DIR)%.o: %.cpp Makefile | $(OBJ_DIR)
	@echo "  â†’ Compiling $(YELLOW)$<$(RESET)"
	@$(CC) $(CFLAGS) -c $< -o $@

$(OBJ_DIR):
	@mkdir -p $@

clean:
	@$(RM) $(OBJ_DIR)
	@echo "$(MAGENTA)$(BOLD)ðŸ§¹ Cleaning up project files...$(RESET)"
	@echo "$(CYAN)    â”œâ”€ Removed object files, and dependencies$(RESET)"
	@echo "$(CYAN)    â””â”€ Cleaned build directory: $(OBJ_DIR)$(RESET)"

fclean: clean
	@$(RM)
	@$(RM) $(NAME)
	@echo "$(GREEN)$(BOLD)\nðŸ—‘ï¸  Full clean-up completed:$(RESET)"
	@echo "$(CYAN)    â””â”€ Executable removed: ./$(NAME)\n$(RESET)"

re: fclean all

fclean-all: fclean

clean-all: clean

run: all
	@echo "$(BOLD)ðŸš€ Running:$(RESET) ./$(NAME) $(ARGS)"
	@./$(NAME) $(ARGS)

.PHONY: all clean fclean re run

#------------------------------------------------#
#					COLORS						 #
#------------------------------------------------#
RED		= \033[0;31m
GREEN	= \033[0;32m
YELLOW	= \033[1;33m
BLUE	= \033[0;34m
CYAN	= \033[0;36m
MAGENTA	= \033[0;35m
WHITE	= \033[1;37m
BOLD    = \033[1m
RESET   = \033[0m


